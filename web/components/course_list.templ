package components

import (
    "fmt"
    "net/url"
    "github.com/naozine/project_crud_with_auth_tmpl/internal/database"
)

type CourseInfo struct {
    CourseName string
    StopCount  int
}

templ CourseList(lp database.Project, courses []CourseInfo) {
    <div class="max-w-5xl mx-auto">
        <div class="mb-8 flex items-center justify-between">
            <div>
                <h2 class="text-2xl font-bold tracking-tight text-gray-900">é…é€ã‚³ãƒ¼ã‚¹ä¸€è¦§</h2>
                <p class="mt-1 text-sm text-gray-500">æ¡ˆä»¶: { lp.Name }</p>
            </div>
        </div>

        if len(courses) == 0 {
            <div class="text-center py-12 bg-white border-2 border-dashed border-gray-300 rounded-lg">
                <p class="text-gray-500">é…é€ãƒ«ãƒ¼ãƒˆãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>
                <a href={ templ.URL(fmt.Sprintf("/projects/%d/courses/upload", lp.ID)) }
                   class="mt-4 inline-flex items-center text-sm text-indigo-600 hover:text-indigo-900">
                    CSVã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ â†’
                </a>
            </div>
        } else {
            <div class="space-y-3">
                for _, course := range courses {
                    <a href={ templ.URL(fmt.Sprintf("/projects/%d/courses/%s", lp.ID, url.QueryEscape(course.CourseName))) }
                       class="group flex items-center justify-between rounded-lg border border-gray-200 bg-white p-4 hover:border-gray-50">
                        <div class="flex items-center space-x-4">
                            <span class="text-2xl">ğŸš›</span>
                            <div>
                                <h3 class="text-base font-semibold text-gray-900 group-hover:text-indigo-600 transition-colors">
                                    { course.CourseName }
                                </h3>
                                <p class="text-sm text-gray-500">
                                    { fmt.Sprintf("%d", course.StopCount) } åœ°ç‚¹
                                </p>
                            </div>
                        </div>
                        <span class="text-sm font-medium text-indigo-600 group-hover:text-indigo-800">
                            è©³ç´°ã‚’è¦‹ã‚‹ â†’
                        </span>
                    </a>
                }
            </div>
        }

        <div class="mt-6">
            <a href={ templ.URL(fmt.Sprintf("/projects/%d", lp.ID)) }
               class="text-sm font-medium text-gray-600 hover:text-gray-900">
                â† æ¡ˆä»¶è©³ç´°ã«æˆ»ã‚‹
            </a>
        </div>
    </div>
}
